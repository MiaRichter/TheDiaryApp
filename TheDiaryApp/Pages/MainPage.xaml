<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:models="clr-namespace:TheDiaryApp.Models"
             x:Class="TheDiaryApp.Pages.SchedulePage"
             Title="Расписание">

    <ScrollView>
        <VerticalStackLayout Spacing="10" Padding="10">

            <!-- Заголовок -->
            <Label Text="Расписание"
                   FontSize="20"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   Margin="0,10"/>

            <!-- Отображение расписания -->
            <StackLayout BindableLayout.ItemsSource="{Binding Schedule.WeekData}">
                <BindableLayout.ItemTemplate>
                    <DataTemplate>
                        <VerticalStackLayout Spacing="5">

                            <!-- Неделя -->
                            <Label Text="{Binding Key}" 
                                   FontSize="18"
                                   FontAttributes="Bold"
                                   TextColor="Black"
                                   Margin="0,10,0,5"/>

                            <!-- Дни недели -->
                            <StackLayout BindableLayout.ItemsSource="{Binding Value}">
                                <BindableLayout.ItemTemplate>
                                    <DataTemplate>
                                        <VerticalStackLayout Spacing="5">

                                            <!-- День недели -->
                                            <Label Text="{Binding Key}" 
                                                   FontSize="16"
                                                   FontAttributes="Bold"
                                                   TextColor="Gray"
                                                   Margin="10,5,0,0"/>

                                            <!-- Пары -->
                                            <StackLayout BindableLayout.ItemsSource="{Binding Value}">
                                                <BindableLayout.ItemTemplate>
                                                    <DataTemplate>
                                                        <Frame Padding="10"
                                                               BackgroundColor="#F5F5F5"
                                                               CornerRadius="5"
                                                               Margin="10,0,10,5">
                                                            <Grid ColumnDefinitions="30*,70*"
                                                                  RowDefinitions="*,*,*">

                                                                <!-- Номер пары -->
                                                                <Label Text="{Binding LessonNumber}"
                                                                       FontAttributes="Bold"
                                                                       FontSize="16"
                                                                       VerticalOptions="Center"
                                                                       Grid.Column="0"
                                                                       Grid.RowSpan="3"/>

                                                                <!-- Предмет -->
                                                                <Label Text="{Binding Subject}"
                                                                       FontSize="14"
                                                                       Grid.Column="1"
                                                                       Grid.Row="0"/>

                                                                <!-- Преподаватель -->
                                                                <Label Text="{Binding Teacher}"
                                                                       FontSize="12"
                                                                       TextColor="Gray"
                                                                       Grid.Column="1"
                                                                       Grid.Row="1"/>

                                                                <!-- Аудитория -->
                                                                <Label Text="{Binding Room}"
                                                                       FontSize="12"
                                                                       TextColor="Gray"
                                                                       Grid.Column="1"
                                                                       Grid.Row="2"/>
                                                            </Grid>
                                                        </Frame>
                                                    </DataTemplate>
                                                </BindableLayout.ItemTemplate>
                                            </StackLayout>
                                        </VerticalStackLayout>
                                    </DataTemplate>
                                </BindableLayout.ItemTemplate>
                            </StackLayout>
                        </VerticalStackLayout>
                    </DataTemplate>
                </BindableLayout.ItemTemplate>
            </StackLayout>

            <!-- Сообщение при отсутствии данных -->
            <Label Text="Расписание не найдено"
                   IsVisible="{Binding IsEmpty}"
                   HorizontalOptions="Center"
                   VerticalOptions="Center"
                   Margin="20"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>